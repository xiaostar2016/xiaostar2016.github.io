<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Kotlin中常见的符号 | Xiao`s Blog</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><!-- gallery that comes before the header--><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a href="/" class="sidebar-nav-item active">Home</a><a href="/archives" class="sidebar-nav-item">Archives</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Kotlin/">Kotlin</a></div><div class="post-time">2017-10-05</div></div></div><div class="container post-header"><h1>Kotlin中常见的符号</h1></div><div class="container post-content"><p>在今年的Google I/O大会上，Google正式宣布，Kotlin将会成为Android开发的官方支持语言。除了Android外，Kotlin还可以完全作为服务端开发的语言，比如在未来的Spring 5就将对Kotlin提供强大的支持。以及浏览器编程语言，与JS进行交互。</p>
<p>Kotlin是一门静态语言，支持多种平台，包括移动端、服务端以及浏览器端，此外，Kotlin还是一门融合了面向对象与函数式编程的语言，支持泛型、安全的空判断，并且Kotlin与Java可以做到完全的交互。</p>
<p>现在介绍Kotlin的文章已经是铺天盖地，大部分都是从Kotlin的基本数据类型介绍起，本文不想重复这样的事情，这里从另一面来开始，我们来看看Kotlin中的各种符号。</p>
<p><img src="http://img.blog.csdn.net/20170623172251937?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvenhjMTIzZQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/50/gravity/SouthEast" alt="这里写图片描述"></p>
<ul>
<li>$符合</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">println(<span class="string">"itemB:<span class="variable">$itemB</span>"</span>)</div><div class="line"></div><div class="line"><span class="comment">//字符串模板</span></div><div class="line"><span class="keyword">var</span> userInfo = <span class="string">"name:<span class="subst">$&#123;user.name&#125;</span>,  age:<span class="variable">$age</span>"</span><span class="number">1234</span></div></pre></td></tr></table></figure>
<ul>
<li>？问号</li>
</ul>
<p>表示这个对象可能为空</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//在变量类型后面加上问号，代表该变量是可空变量  </span></div><div class="line"><span class="keyword">var</span> name: String? = <span class="string">"zhangsan"</span>  <span class="number">12</span></div></pre></td></tr></table></figure>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 如果str不能转为Int类型，则返回null</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">parseInt</span><span class="params">(str: <span class="type">String</span>)</span></span>: <span class="built_in">Int</span>? &#123; </div><div class="line">  <span class="comment">// (代码略)</span></div><div class="line">&#125;</div><div class="line"><span class="number">1234567</span></div></pre></td></tr></table></figure>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">b?.length <span class="comment">//如果 b非空，就返回 b.length ，否则返回 null，这个表达式的类型是 Int? 。1</span></div></pre></td></tr></table></figure>
<ul>
<li>Elvis操作符（?:）</li>
</ul>
<p>如果r非空，我使用它；否则使⽤某个非空的值 x ”：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> l: <span class="built_in">Int</span> = <span class="keyword">if</span> (b != <span class="literal">null</span>) b.length <span class="keyword">else</span> <span class="number">-1</span> <span class="number">1</span></div></pre></td></tr></table></figure>
<p>除了完整的 if-表达式，这还可以通过 Elvis 操作符表达：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> l = b?.length ?: <span class="number">-1</span> <span class="number">1</span></div></pre></td></tr></table></figure>
<p>如果 ?: 左侧表达式非空，elvis操作符就返回其左侧表达式，否则返回右侧表达式。请注意，当且仅当左侧为空时，才会对右侧表达式求值。</p>
<ul>
<li>!! 操作符</li>
</ul>
<p>对于NPE 爱好者，我们可以写 b!! ，这会返回一个非空的 b 值 或者如果 b 为空，就会抛出一个 NPE 异常：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> l = b!!.length1</div></pre></td></tr></table></figure>
<p>因此，如果你想要一个 NPE，你可以得到它，但是你必须显式要求它，否则它不会不期而至。</p>
<ul>
<li>==号与===号</li>
</ul>
<p>==判断值是否相等，===判断值及引用是否完全相等。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> num: <span class="built_in">Int</span> = <span class="number">128</span>;</div><div class="line"><span class="keyword">val</span> a:<span class="built_in">Int</span>? = num</div><div class="line"><span class="keyword">val</span> b:<span class="built_in">Int</span>? = num</div><div class="line">println(a == b)</div><div class="line">print(a === b)<span class="number">12345</span></div></pre></td></tr></table></figure>
<ul>
<li>..符号</li>
</ul>
<p>Kotlin中有区间的概念，区间表达式由具有操作符形式 .. 的 rangeTo 函数辅以 in 和 !in 形成。 区间是为任何可比较类型定义的，但对于整型原生类型，它有一个优化的实现。以下是使用区间的一些示例：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.10</span>) &#123; <span class="comment">// 等同于 1 &lt;= i &amp;&amp; i &lt;= 10</span></div><div class="line">    println(i)</div><div class="line">&#125;</div><div class="line"><span class="comment">//使用until函数,创建一个不包括其结束元素的区间</span></div><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span> until <span class="number">10</span>) &#123;   <span class="comment">// i in [1, 10) 排除了 10</span></div><div class="line">     println(i)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.4</span>) print(i) <span class="comment">// 输出“1234”</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">4.</span><span class="number">.1</span>) print(i) <span class="comment">// 什么都不输出1234567891011</span></div></pre></td></tr></table></figure>
<p>如果你想倒序迭代数字呢？也很简单。你可以使用标准库中定义的 downTo() 函数</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">4</span> downTo <span class="number">1</span>) print(i) <span class="comment">// 输出“4321”1</span></div></pre></td></tr></table></figure>
<p>step()函数，可以指定任意步长</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.4</span> step <span class="number">2</span>) print(i) <span class="comment">// 输出“13”</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">4</span> downTo <span class="number">1</span> step <span class="number">2</span>) print(i) <span class="comment">// 输出“42”123</span></div></pre></td></tr></table></figure>
<ul>
<li>_（下划线）</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span></span>(<span class="keyword">var</span> id: <span class="built_in">Int</span>, <span class="keyword">var</span> name: String)<span class="number">1</span></div></pre></td></tr></table></figure>
<p>上面的示例中，Book声明了 id，name两个变量。解构时如果只需要id这一个变量时，可以这么做：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">val</span> book = Book(<span class="number">1</span>, <span class="string">"英语"</span>)</div><div class="line"><span class="keyword">val</span> (id, _) = book12</div></pre></td></tr></table></figure>
<ul>
<li>::符号</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//得到类的Class对象</span></div><div class="line">startActivity(Intent(<span class="keyword">this</span><span class="symbol">@KotlinActivity</span>, MainActivity::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>))</span></div><div class="line"></div><div class="line"><span class="comment">//内联函数和reified后续介绍</span></div><div class="line"><span class="keyword">inline</span>  <span class="function"><span class="keyword">fun</span> <span class="type">&lt;<span class="keyword">reified</span> T&gt;</span> Gson.<span class="title">fromJson</span><span class="params">(json:<span class="type">String</span>)</span></span>:T</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> fromJson(json, T::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></div><div class="line">&#125;<span class="number">12345678</span></div></pre></td></tr></table></figure>
<p>方法引用</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> setBook = setOf&lt;String&gt;(<span class="string">"hello"</span>, <span class="string">"hi"</span>, <span class="string">"你好"</span>)</div><div class="line"><span class="comment">//    setBook.forEach &#123; print(it)&#125;</span></div><div class="line">    setBook.forEach(::print)<span class="number">123</span></div></pre></td></tr></table></figure>
<ul>
<li>@符号</li>
</ul>
<p>1、限定this的类型</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line">    inner <span class="class"><span class="keyword">class</span> <span class="title">State</span></span>&#123;</div><div class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">getUser</span><span class="params">()</span></span>: User&#123;</div><div class="line">            <span class="comment">//返回User</span></div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span><span class="symbol">@User</span></div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">getState</span><span class="params">()</span></span>: State&#123;</div><div class="line">            <span class="comment">//返回State</span></div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span><span class="symbol">@State</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="number">12345678910111213</span></div></pre></td></tr></table></figure>
<p>2、作为标签</p>
<p>跳出双层for</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">loop@</span> <span class="keyword">for</span> (itemA <span class="keyword">in</span> arraysA) &#123;</div><div class="line">     <span class="keyword">var</span> i : <span class="built_in">Int</span> = <span class="number">0</span></div><div class="line">      <span class="keyword">for</span> (itemB <span class="keyword">in</span> arraysB) &#123;</div><div class="line">         i++</div><div class="line">         <span class="keyword">if</span> (itemB &gt; <span class="number">2</span>) &#123;</div><div class="line">             <span class="keyword">break</span><span class="symbol">@loop</span></div><div class="line">         &#125;</div><div class="line"></div><div class="line">         println(<span class="string">"itemB:<span class="variable">$itemB</span>"</span>)</div><div class="line">     &#125;</div><div class="line"></div><div class="line">&#125;<span class="number">123456789101112</span></div></pre></td></tr></table></figure>
<p>命名函数自动定义标签：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">fun_run</span><span class="params">()</span></span>&#123;</div><div class="line">    run &#123;</div><div class="line">        println(<span class="string">"lambda"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> i: <span class="built_in">Int</span> = run &#123;</div><div class="line">        <span class="keyword">return</span><span class="symbol">@run</span> <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    println(<span class="string">"<span class="variable">$i</span>"</span>)</div><div class="line">    <span class="comment">//匿名函数可以通过自定义标签进行跳转和返回</span></div><div class="line">    i = run (<span class="symbol">outer@</span>&#123;</div><div class="line">        <span class="keyword">return</span><span class="symbol">@outer</span> <span class="number">2</span></div><div class="line">    &#125;)</div><div class="line">    println(i)</div><div class="line">&#125;<span class="number">1234567891011121314</span></div></pre></td></tr></table></figure>
<p>从forEach函数跳出</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">forEach_label</span><span class="params">(ints: <span class="type">List</span>&lt;<span class="type">Int</span>&gt;)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">var</span> i =<span class="number">2</span></div><div class="line">    ints.forEach &#123;</div><div class="line">        <span class="comment">//forEach中无法使用continue和break;</span></div><div class="line"><span class="comment">//        if (it == 0) continue //编译错误</span></div><div class="line"><span class="comment">//        if (it == 2) /*break //编译错误 */</span></div><div class="line">        print(it)</div><div class="line">    &#125;</div><div class="line">     run <span class="symbol">outer@</span>&#123;</div><div class="line">         ints.forEach &#123;</div><div class="line">             <span class="keyword">if</span> (it == <span class="number">0</span>) <span class="keyword">return</span><span class="symbol">@forEach</span> <span class="comment">//相当于在forEach函数中continue,实际上是从匿名函数返回</span></div><div class="line">             <span class="keyword">if</span> (it == <span class="number">2</span>) <span class="keyword">return</span><span class="symbol">@outer</span> <span class="comment">//相当于在forEach函数中使用break,实际上是跳转到outer之外</span></div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (i == <span class="number">3</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="comment">//每个函数的名字代表一个函数地址，所以函数自动成为标签</span></div><div class="line">        <span class="keyword">return</span><span class="symbol">@forEach_label</span> <span class="comment">//等同于return</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>{}符号</li>
</ul>
<p>这里指的是lambda表达式的符号。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 一个参数</span></div><div class="line"><span class="keyword">var</span> callback: ((str: String) -&gt; <span class="built_in">Unit</span>)? = <span class="literal">null</span></div><div class="line">callback = &#123; println(it)&#125;</div><div class="line"><span class="comment">// 判断并使用</span></div><div class="line">callback?.invoke(<span class="string">"hello"</span>)</div><div class="line"></div><div class="line"><span class="comment">//两个参数</span></div><div class="line"><span class="keyword">var</span> callback2: ((name: String, age: <span class="built_in">Int</span>) -&gt; <span class="built_in">Unit</span>)? = <span class="literal">null</span></div><div class="line">callback2 = &#123; hello: String, world: <span class="built_in">Int</span> -&gt; println(<span class="string">"<span class="variable">$hello</span>'s age is <span class="variable">$world</span>"</span>) &#125;</div><div class="line">callback2?.invoke(<span class="string">"Tom"</span>, <span class="number">22</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> callback3 :((num1:<span class="built_in">Int</span>, num2: <span class="built_in">Int</span>)-&gt;String)? = <span class="literal">null</span></div><div class="line"><span class="comment">//类型可以推断</span></div><div class="line">callback3 = &#123; num1, num2 -&gt;</div><div class="line">    <span class="keyword">var</span> res:<span class="built_in">Int</span> = num1 + num2</div><div class="line">    res.toString()</div><div class="line">&#125;</div><div class="line"></div><div class="line">println(callback3?.invoke(<span class="number">1</span>, <span class="number">2</span>))</div></pre></td></tr></table></figure>
<p>kotlin中{}里面整个是lambda的一个表达式，而java8中{}部分只是lambda表达式的body部分。</p>
<p>还要 :符号，用于类名后表示继承，用于变量后限定变量类型，是Kotlin中最常用的符号，这里基本囊括了Koltin中一些常见的符号，关于符号就介绍这么多。</p>
<p>来源：<a href="http://blog.csdn.net/zxc123e/article/details/73368781" target="_blank" rel="external">http://blog.csdn.net/zxc123e/article/details/73368781</a></p>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});
</script></body></html>